const { cmd, commands } = require('../command');
const os = require("os");
const { runtime } = require('../lib/functions');
const { updateEnv, readEnv } = require('../lib/database');

cmd({
    pattern: "about",
    alias: ["laki", "kaudame"],
    desc: "Check uptime and system status",
    category: "main",
    react: "üìü",
    filename: __filename
},
async (conn, mek, m, { from, quoted, body, isCmd, command, args, q, isGroup, sender, senderNumber, botNumber2, botNumber, pushname, isMe, isOwner, groupMetadata, groupName, participants, groupAdmins, isBotAdmins, isAdmins, reply }) => {
    try {
        // Config ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä LANGUAGE ‡∂ö‡∑í‡∂∫‡∑Ä‡∂±‡∑Ä‡∑è
        const env = await readEnv();
        const language = env.LANGUAGE ? env.LANGUAGE.toLowerCase() : 'english';

        // ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∂Ö‡∂±‡∑î‡∑Ä ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©
        const messages = {
            sinhala: {
                status: (pushname) => `*üëã ‡∂Ü‡∂∫‡∑î‡∂∂‡∑ù‡∑Ä‡∂±‡∑ä ${pushname}*\n` +
                    `‚ú®‚Éù‚Éö‚Éù‚Éö__ ‡∂Ü_‡∂¥‡∑ê‡∂ß‡∑í‡∂∫‡∑ù_‡∂ö‡∑ú‡∑Ñ‡∂∏‡∂Ø?___‚Éù‚Éö‚Éù‚Éöüíï\n` +
                    `*‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó*\n` +
                    `*üíõ‚ùê... @DINU BB'hüíó‡æÄ‡Ω≤üíõ*\n` +
                    `*‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù*\n` +
                    `*‚ùñ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ¬∑¬∑¬∑‚ñ∏*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ï‡∂±‡∂∏ - ‡∂Ø‡∑í‡∂±‡∑îü™Ñü§ç*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ï‡∂ª‡∂ß - ‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ï‡∑Ä‡∂∫‡∑É - 17+‚ù£Ô∏è*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ï‡∂ã‡∂¥‡∂±‡∑ä‡∂Ø‡∑í‡∂±‡∂∫ - 08/20‚ú®*\n` +
                    `*‚ùñ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ¬∑¬∑¬∑‚ñ∏‚ñ∏*\n` +
                    `*‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó*\n` +
                    `*‚ùñhttps://wa.me/+94727163302?text=‡∑Ñ‡∑è‡∂∫‡∑í_Dinu+BB'hüò©‚Éù‚Éöüíó‚Éù‚Éöüçìü™Ñü§ç*\n` +
                    `*‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù*\n` +
                    `‚ô° „Ö§      ‚ùç„Ö§      ‚éô„Ö§      ‚å≤\n` +
                    `À°·∂¶·µè·µâ     ·∂ú·µí·µê·µê·µâ‚Åø·µó     À¢·µÉ·µõ·µâ     À¢ ∞·µÉ ≥·µâ*\n` +
                    `*‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê ¬∞‚ùÄ‚Ä¢¬∞‚úÆ¬∞‚Ä¢‚ùÄ¬∞‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó*\n` +
                    `  *‚îà‚îÅ‚ïê‚òÜ  ùêãùêéùêÉ ùêó ùêåùêÉ ‚òÜ‚ïê‚îÅ‚îà*\n` +
                    `*‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ùÄ¬∞‚Ä¢‚ùÅ‚úÆ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù*\n` +
                    `> „ãõÔ∏é ·¥ò·¥è·¥°·¥á Ä·¥Ö  ô è  ·¥Ñ è ô·¥á Ä ·¥Ö…™…¥·¥ú …™·¥Ö`,
                error: (e) => `‡∂ö‡∂´‡∂ú‡∑è‡∂ß‡∑î‡∂∫‡∑í, ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∂á‡∂≠‡∑í ‡∑Ä‡∑î‡∂´‡∑è: ${e.message}`
            },
            english: {
                status: (pushname) => `*üëã HELLO ${pushname}*\n` +
                    `‚ú®‚Éù‚Éö‚Éù‚Éö__ How are you?___‚Éù‚Éö‚Éù‚Éöüíï\n` +
                    `*‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó*\n` +
                    `*üíõ‚ùê... @DINUüíó‡æÄ‡Ω≤üíõ*\n` +
                    `*‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù*\n` +
                    `*‚ùñ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ¬∑¬∑¬∑‚ñ∏*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ïName - DINUü™Ñü§ç*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ïFrom - SRI LANKA*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ïAge - 17+‚ù£Ô∏è*\n` +
                    `*‚ùñ‚îÇ‚ñ∏‚û§‚≠ïBirthday - 08/20‚ú®*\n` +
                    `*‚ùñ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ¬∑¬∑¬∑‚ñ∏‚ñ∏*\n` +
                    `*‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó*\n` +
                    `*‚ùñhttps://wa.me/+94727163302?text=HEY_DINU+BB'hüò©‚Éù‚Éöüíó‚Éù‚Éöüçìü™Ñü§ç*\n` +
                    `*‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ôõ¬∞‚Ä¢‚ùÅ‚úÆ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù*\n` +
                    `‚ô° „Ö§      ‚ùç„Ö§      ‚éô„Ö§      ‚å≤\n` +
                    `À°·∂¶·µè·µâ     ·∂ú·µí·µê·µê·µâ‚Åø·µó     À¢·µÉ·µõ·µâ     À¢ ∞·µÉ ≥·µâ*\n` +
                    `*‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê ¬∞‚ùÄ‚Ä¢¬∞‚úÆ¬∞‚Ä¢‚ùÄ¬∞‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó*\n` +
                    `  *‚îà‚îÅ‚ïê‚òÜ  ùêãùêéùêÉ ùêó ùêåùêÉ ‚òÜ‚ïê‚îÅ‚îà*\n` +
                    `*‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚úÆ‚ùÅ‚Ä¢¬∞‚ùÄ¬∞‚Ä¢‚ùÅ‚úÆ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù*\n` +
                    `> „ãõÔ∏é ·¥ò·¥è·¥°·¥á Ä·¥Ö  ô è  ·¥Ñ è ô·¥á Ä ·¥Ö…™…¥·¥ú …™·¥Ö`,
                error: (e) => `An error occurred: ${e.message}`
            }
        };

        const msg = messages[language] || messages.english; // ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∑Ñ‡∂∏‡∑î ‡∂±‡∑ú‡∑Ä‡∑î‡∂´‡∑ú‡∂≠‡∑ä ‡∂â‡∂Ç‡∂ú‡∑ä‚Äç‡∂ª‡∑ì‡∑É‡∑í default ‡∂Ω‡∑ô‡∑É

        // ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫ ‡∂∫‡∑Ä‡∂±‡∑Ä‡∑è
        await conn.sendMessage(from, { 
            image: { url: "https://i.imgur.com/O7IN8mD.jpeg" },  // ‡∂ª‡∑ñ‡∂¥ URL
            caption: msg.status(pushname),
            contextInfo: {
                mentionedJid: [m.sender],
                forwardingScore: 999,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: '120363401755639074@newsletter',
                    newsletterName: '‚ùÆ‚ùÆ LOD X MD FORWARD ‚ùØ‚ùØ',
                    serverMessageId: 143
                }
            }
        }, { quoted: mek });

    } catch (e) {
        console.error("Error in about command:", e);
        const env = await readEnv();
        const language = env.LANGUAGE ? env.LANGUAGE.toLowerCase() : 'english';
        const msg = messages[language] || messages.english;
        reply(msg.error(e));
    }
});
